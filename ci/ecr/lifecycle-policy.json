
{
    "rules": [
      {
        "rulePriority": 10,
        "description": "For `latest` tag, keep last 3 images",
        "selection": {
          "tagStatus": "tagged",
          "tagPrefixList": ["latest"],
          "countType": "imageCountMoreThan",
          "countNumber": 3
        },
        "action": { "type": "expire" }
      },
      {
        "rulePriority": 20,
        "description": "For `main` tag, keep last 3 images",
        "selection": {
          "tagStatus": "tagged",
          "tagPrefixList": ["main"],
          "countType": "imageCountMoreThan",
          "countNumber": 3
        },
        "action": { "type": "expire" }
      },
      {
        "rulePriority": 990,
        "description": "Only keep untagged images for 5 days",
        "selection": {
          "tagStatus": "untagged",
          "countType": "sinceImagePushed",
          "countUnit": "days",
          "countNumber": 5
        },
        "action": { "type": "expire" }
      },
      {
        "rulePriority": 1000,
        "description": "Only keep tagged images for 10 days",
        "selection": {
          "tagStatus": "any",
          "countType": "sinceImagePushed",
          "countUnit": "days",
          "countNumber": 10
        },
        "action": { "type": "expire" }
      }
    ]
  }